{"ast":null,"code":"import \"core-js/modules/es.error.cause.js\";\nimport usersAPI from \"./../apis/users\";\nimport { Toast } from \"./../utils/helpers\";\nexport default {\n  props: {\n    initialRestaurant: {\n      type: Object,\n      required: true\n    }\n  },\n\n  data() {\n    return {\n      restaurant: this.initialRestaurant\n    };\n  },\n\n  watch: {\n    initialRestaurant(newValue) {\n      this.restaurant = { ...this.restaurant,\n        ...newValue\n      };\n    }\n\n  },\n  methods: {\n    async addFavorite(restaurantId) {\n      try {\n        const data = await usersAPI.addFavorite({\n          restaurantId\n        });\n\n        if (data.statusText !== \"OK\") {\n          throw new Error(\"無法追蹤此美食達人，請稍後再試\");\n        }\n\n        this.restaurant = { ...this.restaurant,\n          isFavorited: true\n        };\n      } catch (error) {\n        Toast.fire({\n          icon: \"error\",\n          title: \"無法將餐廳加入最愛，請稍後再試\"\n        });\n      }\n    },\n\n    async deleteFavorite(restaurantId) {\n      try {\n        const data = await usersAPI.deleteFavorite({\n          restaurantId\n        }); // 檢測\n\n        if (data.statusText !== \"OK\") {\n          throw new Error(\"無法將餐廳從最愛中刪除，請稍後再試\");\n        }\n\n        this.restaurant = { ...this.restaurant,\n          isFavorited: false\n        };\n      } catch (error) {\n        Toast.fire({\n          icon: \"error\",\n          title: \"無法將餐廳從最愛中刪除，請稍後再試\"\n        });\n      }\n    },\n\n    async addLike(restaurantId) {\n      try {\n        const data = await usersAPI.addLike({\n          restaurantId\n        }); // 檢測\n\n        if (data.statusText !== \"OK\") {\n          throw new Error(\"無法將餐廳加入喜歡，請稍後再試\");\n        }\n\n        this.restaurant = { ...this.restaurant,\n          isLiked: true\n        };\n      } catch (error) {\n        Toast.fire({\n          icon: \"error\",\n          title: \"無法將餐廳加入喜歡，請稍後再試\"\n        });\n      }\n    },\n\n    async deleteLike(restaurantId) {\n      try {\n        const data = await usersAPI.deleteLike({\n          restaurantId\n        }); // 檢測\n\n        if (data.statusText !== \"OK\") {\n          throw new Error(\"無法將餐廳從喜歡中刪除，請稍後再試\");\n        }\n\n        this.restaurant = { ...this.restaurant,\n          isLiked: false\n        };\n      } catch (error) {\n        Toast.fire({\n          icon: \"error\",\n          title: \"無法將餐廳從喜歡中刪除，請稍後再試\"\n        });\n      }\n    }\n\n  }\n};","map":{"version":3,"mappings":";AA4EA;AACA;AAEA;EACAA;IACAC;MACAC,YADA;MAEAC;IAFA;EADA,CADA;;EAOAC;IACA;MACAC;IADA;EAGA,CAXA;;EAYAC;IACAL;MACA,oBACA,kBADA;QAEA;MAFA;IAIA;;EANA,CAZA;EAoBAM;IACA;MACA;QACA;UAAAC;QAAA;;QAEA;UACA;QACA;;QACA,oBACA,kBADA;UAEAC;QAFA;MAIA,CAVA,CAUA;QACAC;UACAC,aADA;UAEAC;QAFA;MAIA;IACA,CAlBA;;IAmBA;MACA;QACA;UAAAJ;QAAA,GADA,CAEA;;QACA;UACA;QACA;;QACA,oBACA,kBADA;UAEAC;QAFA;MAIA,CAVA,CAUA;QACAC;UACAC,aADA;UAEAC;QAFA;MAIA;IACA,CApCA;;IAqCA;MACA;QACA;UAAAJ;QAAA,GADA,CAEA;;QACA;UACA;QACA;;QACA,oBACA,kBADA;UAEAK;QAFA;MAIA,CAVA,CAUA;QACAH;UACAC,aADA;UAEAC;QAFA;MAIA;IACA,CAtDA;;IAuDA;MACA;QACA;UAAAJ;QAAA,GADA,CAEA;;QACA;UACA;QACA;;QACA,oBACA,kBADA;UAEAK;QAFA;MAIA,CAVA,CAUA;QACAH;UACAC,aADA;UAEAC;QAFA;MAIA;IACA;;EAxEA;AApBA","names":["props","initialRestaurant","type","required","data","restaurant","watch","methods","restaurantId","isFavorited","Toast","icon","title","isLiked"],"sourceRoot":"src/components","sources":["RestaurantDetail.vue"],"sourcesContent":["<template>\r\n  <div class=\"row\">\r\n    <div class=\"col-md-12 mb-3\">\r\n      <h1>{{ restaurant.name }}</h1>\r\n      <p class=\"badge badge-secondary mt-1 mb-3\">\r\n        {{ restaurant.categoryName ? restaurant.categoryName : \"未分類\" }}\r\n      </p>\r\n    </div>\r\n    <div class=\"col-lg-4\">\r\n      <img\r\n        class=\"img-responsive center-block\"\r\n        :src=\"restaurant.image\"\r\n        style=\"width: 250px; margin-bottom: 25px\"\r\n      />\r\n      <div class=\"contact-info-wrap\">\r\n        <ul class=\"list-unstyled\">\r\n          <li>\r\n            <strong>Opening Hour:</strong>\r\n            {{ restaurant.openingHours }}\r\n          </li>\r\n          <li>\r\n            <strong>Tel:</strong>\r\n            {{ restaurant.tel }}\r\n          </li>\r\n          <li>\r\n            <strong>Address:</strong>\r\n            {{ restaurant.address }}\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n    <div class=\"col-lg-8\">\r\n      <p>{{ restaurant.description }}</p>\r\n      <router-link\r\n        class=\"btn btn-primary btn-border mr-2\"\r\n        :to=\"{ name: 'dashboard', params: { id: restaurant.id } }\"\r\n        >Dashboard</router-link\r\n      >\r\n\r\n      <button\r\n        v-if=\"restaurant.isFavorited\"\r\n        @click.stop.prevent=\"deleteFavorite(restaurant.id)\"\r\n        type=\"button\"\r\n        class=\"btn btn-danger btn-border mr-2\"\r\n      >\r\n        移除最愛\r\n      </button>\r\n      <button\r\n        v-else\r\n        @click.stop.prevent=\"addFavorite(restaurant.id)\"\r\n        type=\"button\"\r\n        class=\"btn btn-primary btn-border mr-2\"\r\n      >\r\n        加到最愛\r\n      </button>\r\n      <button\r\n        v-if=\"restaurant.isLiked\"\r\n        @click.stop.prevent=\"deleteLiked(restaurant.id)\"\r\n        type=\"button\"\r\n        class=\"btn btn-danger like mr-2\"\r\n      >\r\n        Unlike\r\n      </button>\r\n      <button\r\n        v-else\r\n        @click.stop.prevent=\"addLiked(restaurant.id)\"\r\n        type=\"button\"\r\n        class=\"btn btn-primary like mr-2\"\r\n      >\r\n        Like\r\n      </button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport usersAPI from \"./../apis/users\";\r\nimport { Toast } from \"./../utils/helpers\";\r\n\r\nexport default {\r\n  props: {\r\n    initialRestaurant: {\r\n      type: Object,\r\n      required: true,\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      restaurant: this.initialRestaurant,\r\n    };\r\n  },\r\n  watch: {\r\n    initialRestaurant(newValue) {\r\n      this.restaurant = {\r\n        ...this.restaurant,\r\n        ...newValue\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    async addFavorite(restaurantId) {\r\n      try {\r\n        const data = await usersAPI.addFavorite({ restaurantId });\r\n        \r\n        if (data.statusText !== \"OK\") {\r\n          throw new Error(\"無法追蹤此美食達人，請稍後再試\");\r\n        }\r\n        this.restaurant = {\r\n          ...this.restaurant,\r\n          isFavorited: true,\r\n        };\r\n      } catch (error) {\r\n        Toast.fire({\r\n          icon: \"error\",\r\n          title: \"無法將餐廳加入最愛，請稍後再試\",\r\n        });\r\n      }\r\n    },\r\n    async deleteFavorite(restaurantId) {\r\n      try {\r\n        const data = await usersAPI.deleteFavorite({ restaurantId });\r\n        // 檢測\r\n        if (data.statusText !== \"OK\") {\r\n          throw new Error(\"無法將餐廳從最愛中刪除，請稍後再試\");\r\n        }\r\n        this.restaurant = {\r\n          ...this.restaurant,\r\n          isFavorited: false,\r\n        };\r\n      } catch (error) {\r\n        Toast.fire({\r\n          icon: \"error\",\r\n          title: \"無法將餐廳從最愛中刪除，請稍後再試\",\r\n        });\r\n      }\r\n    },\r\n    async addLike(restaurantId) {\r\n      try {\r\n        const data = await usersAPI.addLike({ restaurantId });\r\n        // 檢測\r\n        if (data.statusText !== \"OK\") {\r\n          throw new Error(\"無法將餐廳加入喜歡，請稍後再試\");\r\n        }\r\n        this.restaurant = {\r\n          ...this.restaurant,\r\n          isLiked: true,\r\n        };\r\n      } catch (error) {\r\n        Toast.fire({\r\n          icon: \"error\",\r\n          title: \"無法將餐廳加入喜歡，請稍後再試\",\r\n        });\r\n      }\r\n    },\r\n    async deleteLike(restaurantId) {\r\n      try {\r\n        const data = await usersAPI.deleteLike({ restaurantId });\r\n        // 檢測\r\n        if (data.statusText !== \"OK\") {\r\n          throw new Error(\"無法將餐廳從喜歡中刪除，請稍後再試\");\r\n        }\r\n        this.restaurant = {\r\n          ...this.restaurant,\r\n          isLiked: false,\r\n        };\r\n      } catch (error) {\r\n        Toast.fire({\r\n          icon: \"error\",\r\n          title: \"無法將餐廳從喜歡中刪除，請稍後再試\",\r\n        });\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n"]},"metadata":{},"sourceType":"module"}