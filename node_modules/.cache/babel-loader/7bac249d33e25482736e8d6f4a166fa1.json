{"ast":null,"code":"import RestaurantDetail from \"../components/RestaurantDetail.vue\";\nimport RestaurantComments from \"../components/RestaurantComments.vue\";\nimport CreateComment from \"../components/CreateComment.vue\";\nconst dummyData = {\n  restaurant: {\n    id: 1,\n    name: \"Judy Runte\",\n    tel: \"(918) 827-1962\",\n    address: \"98138 Elisa Road\",\n    opening_hours: \"08:00\",\n    description: \"dicta et cupiditate\",\n    image: \"https://loremflickr.com/320/240/food,dessert,restaurant/?random=1\",\n    createdAt: \"2019-06-22T09:00:43.000Z\",\n    updatedAt: \"2019-06-22T09:00:43.000Z\",\n    CategoryId: 3,\n    Category: {\n      id: 3,\n      name: \"義大利料理\",\n      createdAt: \"2019-06-22T09:00:43.000Z\",\n      updatedAt: \"2019-06-22T09:00:43.000Z\"\n    },\n    FavoritedUsers: [],\n    LikedUsers: [],\n    Comments: [{\n      id: 3,\n      text: \"Quos asperiores in nostrum cupiditate excepturi aspernatur.\",\n      UserId: 2,\n      RestaurantId: 1,\n      createdAt: \"2019-06-22T09:00:43.000Z\",\n      updatedAt: \"2019-06-22T09:00:43.000Z\",\n      User: {\n        id: 2,\n        name: \"user1\",\n        email: \"user1@example.com\",\n        password: \"$2a$10$0ISHJI48xu/VRNVmEeycFe8v5ChyT305f8KaJVIhumu7M/eKAikkm\",\n        image: \"https://i.imgur.com/XooCt5K.png\",\n        isAdmin: false,\n        createdAt: \"2019-06-22T09:00:43.000Z\",\n        updatedAt: \"2019-06-23T01:16:31.000Z\"\n      }\n    }]\n  },\n  isFavorited: false,\n  isLiked: false\n};\nconst dummyUser = {\n  currentUser: {\n    id: 1,\n    name: \"管理者\",\n    email: \"root@example.com\",\n    image: \"https://i.pravatar.cc/300\",\n    isAdmin: true\n  },\n  isAuthenticated: true\n};\nexport default {\n  components: {\n    RestaurantDetail,\n    RestaurantComments,\n    CreateComment\n  },\n\n  data() {\n    return {\n      restaurant: {\n        id: -1,\n        name: \"\",\n        categoryName: \"\",\n        image: \"\",\n        openingHours: \"\",\n        tel: \"\",\n        address: \"\",\n        description: \"\",\n        isFavorited: false,\n        isLiked: false\n      },\n      restaurantComments: [],\n      currentUser: dummyUser.currentUser\n    };\n  },\n\n  created() {\n    const {\n      id\n    } = this.$route.params;\n    this.fetchRestaurant(id);\n  },\n\n  methods: {\n    fetchRestaurant(restaurantId) {\n      console.log(\"id\", restaurantId);\n      const {\n        restaurant,\n        isFavorited,\n        isLiked\n      } = dummyData;\n      this.restaurant = {\n        id: restaurant.id,\n        name: restaurant.name,\n        categoryName: restaurant.Category.name,\n        image: restaurant.image,\n        openingHours: restaurant.opening_hours,\n        tel: restaurant.tel,\n        address: restaurant.address,\n        description: restaurant.description,\n        isFavorited: isFavorited,\n        isLiked: isLiked\n      };\n      this.restaurantComments = restaurant.Comments;\n    },\n\n    afterDeleteComment(commentId) {\n      this.restaurantComments = this.restaurantComments.filter(comment => comment.id !== commentId);\n    },\n\n    afterCreateComment(payload) {\n      const {\n        commentId,\n        restaurantId,\n        text\n      } = payload;\n      this.restaurantComments.push({\n        id: commentId,\n        RestaurantId: restaurantId,\n        User: {\n          id: this.currentUser.id,\n          name: this.currentUser.name\n        },\n        text,\n        createdAt: new Date()\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":"AAoBA;AACA;AACA;AAEA;EACAA;IACAC,KADA;IAEAC,kBAFA;IAGAC,qBAHA;IAIAC,2BAJA;IAKAC,sBALA;IAMAC,kCANA;IAOAC,0EAPA;IAQAC,qCARA;IASAC,qCATA;IAUAC,aAVA;IAWAC;MACAV,KADA;MAEAC,aAFA;MAGAM,qCAHA;MAIAC;IAJA,CAXA;IAiBAG,kBAjBA;IAkBAC,cAlBA;IAmBAC,WACA;MACAb,KADA;MAEAc,mEAFA;MAGAC,SAHA;MAIAC,eAJA;MAKAT,qCALA;MAMAC,qCANA;MAOAS;QACAjB,KADA;QAEAC,aAFA;QAGAiB,0BAHA;QAIAC,UACA,8DALA;QAMAb,wCANA;QAOAc,cAPA;QAQAb,qCARA;QASAC;MATA;IAPA,CADA;EAnBA,CADA;EA0CAa,kBA1CA;EA2CAC;AA3CA;AA6CA;EACAC;IACAvB,KADA;IAEAC,WAFA;IAGAiB,yBAHA;IAIAZ,kCAJA;IAKAc;EALA,CADA;EAQAI;AARA;AAWA;EACAC;IACAC,gBADA;IAEAC,kBAFA;IAGAC;EAHA,CADA;;EAMAC;IACA;MACA9B;QACAC,MADA;QAEAC,QAFA;QAGA6B,gBAHA;QAIAxB,SAJA;QAKAyB,gBALA;QAMA7B,OANA;QAOAC,WAPA;QAQAE,eARA;QASAgB,kBATA;QAUAC;MAVA,CADA;MAaAU,sBAbA;MAcAT;IAdA;EAgBA,CAvBA;;EAwBAU;IACA;MAAAjC;IAAA;IACA;EACA,CA3BA;;EA4BAkC;IACAC;MACAC;MACA;QAAArC;QAAAsB;QAAAC;MAAA;MACA;QACAtB,iBADA;QAEAC,qBAFA;QAGA6B,sCAHA;QAIAxB,uBAJA;QAKAyB,sCALA;QAMA7B,mBANA;QAOAC,2BAPA;QAQAE,mCARA;QASAgB,wBATA;QAUAC;MAVA;MAYA;IACA,CAjBA;;IAkBAe;MACA,yDACAC,mCADA;IAGA,CAtBA;;IAuBAC;MACA;QAAAC;QAAAC;QAAA3B;MAAA;MACA;QACAd,aADA;QAEAgB,0BAFA;QAGAC;UACAjB,uBADA;UAEAC;QAFA,CAHA;QAOAa,IAPA;QAQAP;MARA;IAUA;;EAnCA;AA5BA","names":["restaurant","id","name","tel","address","opening_hours","description","image","createdAt","updatedAt","CategoryId","Category","FavoritedUsers","LikedUsers","Comments","text","UserId","RestaurantId","User","email","password","isAdmin","isFavorited","isLiked","currentUser","isAuthenticated","components","RestaurantDetail","RestaurantComments","CreateComment","data","categoryName","openingHours","restaurantComments","created","methods","fetchRestaurant","console","afterDeleteComment","comment","afterCreateComment","commentId","restaurantId"],"sourceRoot":"src/views","sources":["RestauranT.vue"],"sourcesContent":["<template>\r\n  <div class=\"container py-5\">\r\n    <h1>餐廳描述頁</h1>\r\n    <!-- 餐廳資訊頁 RestaurantDetail -->\r\n    <RestaurantDetail :initial-restaurant=\"restaurant\" />\r\n    <hr />\r\n    <!-- 餐廳評論 RestaurantComments -->\r\n    <RestaurantComments\r\n      :restaurant-comments=\"restaurantComments\"\r\n      @after-delete-comment=\"afterDeleteComment\"\r\n    />\r\n    <!-- 新增評論 CreateComment -->\r\n    <CreateComment\r\n      :restaurant-id=\"restaurant.id\"\r\n      @after-create-comment=\"afterCreateComment\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport RestaurantDetail from \"../components/RestaurantDetail.vue\";\r\nimport RestaurantComments from \"../components/RestaurantComments.vue\";\r\nimport CreateComment from \"../components/CreateComment.vue\";\r\n\r\nconst dummyData = {\r\n  restaurant: {\r\n    id: 1,\r\n    name: \"Judy Runte\",\r\n    tel: \"(918) 827-1962\",\r\n    address: \"98138 Elisa Road\",\r\n    opening_hours: \"08:00\",\r\n    description: \"dicta et cupiditate\",\r\n    image: \"https://loremflickr.com/320/240/food,dessert,restaurant/?random=1\",\r\n    createdAt: \"2019-06-22T09:00:43.000Z\",\r\n    updatedAt: \"2019-06-22T09:00:43.000Z\",\r\n    CategoryId: 3,\r\n    Category: {\r\n      id: 3,\r\n      name: \"義大利料理\",\r\n      createdAt: \"2019-06-22T09:00:43.000Z\",\r\n      updatedAt: \"2019-06-22T09:00:43.000Z\",\r\n    },\r\n    FavoritedUsers: [],\r\n    LikedUsers: [],\r\n    Comments: [\r\n      {\r\n        id: 3,\r\n        text: \"Quos asperiores in nostrum cupiditate excepturi aspernatur.\",\r\n        UserId: 2,\r\n        RestaurantId: 1,\r\n        createdAt: \"2019-06-22T09:00:43.000Z\",\r\n        updatedAt: \"2019-06-22T09:00:43.000Z\",\r\n        User: {\r\n          id: 2,\r\n          name: \"user1\",\r\n          email: \"user1@example.com\",\r\n          password:\r\n            \"$2a$10$0ISHJI48xu/VRNVmEeycFe8v5ChyT305f8KaJVIhumu7M/eKAikkm\",\r\n          image: \"https://i.imgur.com/XooCt5K.png\",\r\n          isAdmin: false,\r\n          createdAt: \"2019-06-22T09:00:43.000Z\",\r\n          updatedAt: \"2019-06-23T01:16:31.000Z\",\r\n        },\r\n      },\r\n    ],\r\n  },\r\n  isFavorited: false,\r\n  isLiked: false,\r\n};\r\nconst dummyUser = {\r\n  currentUser: {\r\n    id: 1,\r\n    name: \"管理者\",\r\n    email: \"root@example.com\",\r\n    image: \"https://i.pravatar.cc/300\",\r\n    isAdmin: true,\r\n  },\r\n  isAuthenticated: true,\r\n};\r\n\r\nexport default {\r\n  components: {\r\n    RestaurantDetail,\r\n    RestaurantComments,\r\n    CreateComment,\r\n  },\r\n  data() {\r\n    return {\r\n      restaurant: {\r\n        id: -1,\r\n        name: \"\",\r\n        categoryName: \"\",\r\n        image: \"\",\r\n        openingHours: \"\",\r\n        tel: \"\",\r\n        address: \"\",\r\n        description: \"\",\r\n        isFavorited: false,\r\n        isLiked: false,\r\n      },\r\n      restaurantComments: [],\r\n      currentUser: dummyUser.currentUser,\r\n    };\r\n  },\r\n  created() {\r\n    const { id } = this.$route.params;\r\n    this.fetchRestaurant(id);\r\n  },\r\n  methods: {\r\n    fetchRestaurant(restaurantId) {\r\n      console.log(\"id\", restaurantId);\r\n      const { restaurant, isFavorited, isLiked } = dummyData;\r\n      this.restaurant = {\r\n        id: restaurant.id,\r\n        name: restaurant.name,\r\n        categoryName: restaurant.Category.name,\r\n        image: restaurant.image,\r\n        openingHours: restaurant.opening_hours,\r\n        tel: restaurant.tel,\r\n        address: restaurant.address,\r\n        description: restaurant.description,\r\n        isFavorited: isFavorited,\r\n        isLiked: isLiked,\r\n      };\r\n      this.restaurantComments = restaurant.Comments;\r\n    },\r\n    afterDeleteComment(commentId) {\r\n      this.restaurantComments = this.restaurantComments.filter(\r\n        (comment) => comment.id !== commentId\r\n      );\r\n    },\r\n    afterCreateComment(payload) {\r\n      const { commentId, restaurantId, text } = payload;\r\n      this.restaurantComments.push({\r\n        id: commentId,\r\n        RestaurantId: restaurantId,\r\n        User: {\r\n          id: this.currentUser.id,\r\n          name: this.currentUser.name,\r\n        },\r\n        text,\r\n        createdAt: new Date(),\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n"]},"metadata":{},"sourceType":"module"}