{"ast":null,"code":"import \"core-js/modules/es.error.cause.js\";\nimport { emptyImageFilter } from \"./../utils/mixins\";\nimport adminAPI from './../apis/admin';\nimport { Toast } from \"./../utils/helpers\";\nimport SpinneR from \"../components/SpinneR\";\nexport default {\n  name: \"AdminRestaurant\",\n  mixins: [emptyImageFilter],\n  components: {\n    SpinneR\n  },\n\n  data() {\n    return {\n      restaurant: {\n        id: -1,\n        name: \"\",\n        categoryName: \"\",\n        image: \"\",\n        openingHours: \"\",\n        tel: \"\",\n        address: \"\",\n        description: \"\"\n      },\n      isLoading: true\n    };\n  },\n\n  mounted() {\n    const {\n      id: restaurantId\n    } = this.$route.params;\n    this.fetchRestaurant(restaurantId);\n  },\n\n  beforeRouteUpdate(to, from, next) {\n    const s = to.params;\n    console.log(s);\n    this.fetchRestaurant(id);\n    next();\n  },\n\n  methods: {\n    async fetchRestaurant(restaurantId) {\n      try {\n        this.isLoading = true;\n        const response = await adminAPI.restaurants.getDetail({\n          restaurantId\n        });\n\n        if (response.statusText !== \"OK\") {\n          throw new Error(\"無法編輯餐廳資料，請稍後再試\");\n        }\n\n        const {\n          id,\n          name,\n          tel,\n          address,\n          opening_hours: openingHours,\n          description,\n          image,\n          CategoryId: categoryId\n        } = response.data.restaurant;\n        this.restaurant = { ...this.restaurant,\n          id,\n          name,\n          categoryId,\n          tel,\n          address,\n          description,\n          image,\n          openingHours\n        };\n        this.isLoading = false;\n      } catch (error) {\n        this.isLoading = false;\n        Toast.fire({\n          icon: 'error',\n          title: '無法取得餐廳資料，請稍後再試'\n        });\n      }\n    }\n\n  }\n};","map":{"version":3,"mappings":";AA4CA;AACA;AACA;AACA;AAEA;EACAA,uBADA;EAEAC,0BAFA;EAGAC;IACAC;EADA,CAHA;;EAMAC;IACA;MACAC;QACAC,MADA;QAEAN,QAFA;QAGAO,gBAHA;QAIAC,SAJA;QAKAC,gBALA;QAMAC,OANA;QAOAC,WAPA;QAQAC;MARA,CADA;MAWAC;IAXA;EAaA,CApBA;;EAqBAC;IACA;MAAAR;IAAA;IACA;EACA,CAxBA;;EAyBAS;IACA;IACAC;IACA;IACAC;EACA,CA9BA;;EA+BAC;IACA;MACA;QACA;QACA;UAAAC;QAAA;;QAEA;UACA;QACA;;QAEA;UACAb,EADA;UAEAN,IAFA;UAGAU,GAHA;UAIAC,OAJA;UAKAS,2BALA;UAMAR,WANA;UAOAJ,KAPA;UAQAa;QARA,IASAC,wBATA;QAWA,oBACA,kBADA;UAEAhB,EAFA;UAGAN,IAHA;UAIAuB,UAJA;UAKAb,GALA;UAMAC,OANA;UAOAC,WAPA;UAQAJ,KARA;UASAC;QATA;QAYA;MACA,CAhCA,CAgCA;QACA;QACAe;UACAC,aADA;UAEAC;QAFA;MAIA;IACA;;EAzCA;AA/BA","names":["name","mixins","components","SpinneR","data","restaurant","id","categoryName","image","openingHours","tel","address","description","isLoading","mounted","beforeRouteUpdate","console","next","methods","restaurantId","opening_hours","CategoryId","response","categoryId","Toast","icon","title"],"sourceRoot":"src/views","sources":["AdminRestaurant.vue"],"sourcesContent":["<template>\r\n  <div class=\"container py-5\">\r\n    <SpinneR v-if=\"isLoading\"/>\r\n    <div v-else class=\"row\">\r\n    <div class=\"col-md-12\">\r\n      <h1>{{ restaurant.name }}</h1>\r\n      <span class=\"badge badge-secondary mt-1 mb-3\">\r\n        {{ restaurant.categoryName }}\r\n      </span>\r\n    </div>\r\n    <div class=\"col-md-4\">\r\n      <img\r\n        class=\"img-responsive center-block\"\r\n        :src=\"restaurant.image | emptyImage\"\r\n        style=\"width: 250px; margin-bottom: 25px\"\r\n      />\r\n      <div class=\"well\">\r\n        <ul class=\"list-unstyled\">\r\n          <li>\r\n            <strong>Opening Hour:</strong>\r\n            {{ restaurant.openingHours }}\r\n          </li>\r\n          <li>\r\n            <strong>Tel:</strong>\r\n            {{ restaurant.tel }}\r\n          </li>\r\n          <li>\r\n            <strong>Address:</strong>\r\n            {{ restaurant.address }}\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n    <div class=\"col-md-8\">\r\n      <p>{{ restaurant.description }}</p>\r\n    </div>\r\n  </div>      \r\n  <hr />\r\n  <button type=\"button\" class=\"btn btn-link\" @click=\"$router.back()\">\r\n    回上一頁\r\n  </button>   \r\n  </div>\r\n</template>\r\n<script>\r\nimport { emptyImageFilter } from \"./../utils/mixins\";\r\nimport adminAPI from './../apis/admin';\r\nimport { Toast } from \"./../utils/helpers\";\r\nimport SpinneR from \"../components/SpinneR\"\r\n\r\nexport default {\r\n  name: \"AdminRestaurant\",\r\n  mixins: [emptyImageFilter],\r\n  components: {\r\n    SpinneR,\r\n  },\r\n  data() {\r\n    return {\r\n      restaurant: {\r\n        id: -1,\r\n        name: \"\",\r\n        categoryName: \"\",\r\n        image: \"\",\r\n        openingHours: \"\",\r\n        tel: \"\",\r\n        address: \"\",\r\n        description: \"\",\r\n      },\r\n      isLoading: true\r\n    };\r\n  },\r\n  mounted() {\r\n    const { id: restaurantId } = this.$route.params;\r\n    this.fetchRestaurant(restaurantId);    \r\n  },  \r\n  beforeRouteUpdate (to, from, next) {\r\n    const s= to.params\r\n    console.log(s)\r\n    this.fetchRestaurant(id)\r\n    next()\r\n  },  \r\n  methods: {\r\n    async fetchRestaurant (restaurantId) {\r\n      try {\r\n        this.isLoading = true\r\n        const response = await adminAPI.restaurants.getDetail({restaurantId})\r\n\r\n        if (response.statusText !== \"OK\") {\r\n          throw new Error(\"無法編輯餐廳資料，請稍後再試\");\r\n        }\r\n\r\n        const {\r\n          id,\r\n          name,\r\n          tel,\r\n          address,\r\n          opening_hours: openingHours,\r\n          description,\r\n          image,\r\n          CategoryId: categoryId\r\n        } = response.data.restaurant\r\n\r\n        this.restaurant = {\r\n          ...this.restaurant,\r\n          id,\r\n          name,\r\n          categoryId,\r\n          tel,\r\n          address,\r\n          description,\r\n          image,\r\n          openingHours\r\n        }\r\n\r\n        this.isLoading = false\r\n      } catch(error) {\r\n        this.isLoading = false\r\n        Toast.fire({\r\n          icon: 'error',\r\n          title: '無法取得餐廳資料，請稍後再試'\r\n        })\r\n      }\r\n    },\r\n  }\r\n}\r\n</script>"]},"metadata":{},"sourceType":"module"}