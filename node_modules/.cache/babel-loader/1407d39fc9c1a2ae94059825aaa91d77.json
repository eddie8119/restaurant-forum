{"ast":null,"code":"import \"core-js/modules/es.error.cause.js\";\nimport { fromNowFilter } from \"./../utils/mixins\";\nimport { mapState } from \"vuex\";\nimport commentsAPI from \"./../apis/comments\";\nimport { Toast } from \"./../utils/helpers\";\nexport default {\n  name: 'RestaurantComments',\n  mixins: [fromNowFilter],\n  props: {\n    restaurantComments: {\n      type: Array,\n      required: true\n    }\n  },\n  computed: { ...mapState(['currentUser'])\n  },\n  methods: {\n    async handleDeleteButtonClick(commentId) {\n      try {\n        const response = await commentsAPI.delete({\n          commentId\n        });\n\n        if (response.data.status !== \"success\") {\n          throw new Error(response.data);\n        }\n\n        Toast.fire({\n          icon: \"success\",\n          title: \"留言已刪除\"\n        });\n        this.$emit(\"after-delete-comment\", commentId);\n      } catch (error) {\n        Toast.fire({\n          icon: \"error\",\n          title: \"無法刪除留言，請稍後再試\"\n        });\n      }\n    }\n\n  }\n};","map":{"version":3,"mappings":";AA+BA;AACA;AACA;AACA;AAGA;EACAA,0BADA;EAEAC,uBAFA;EAGAC;IACAC;MACAC,WADA;MAEAC;IAFA;EADA,CAHA;EASAC,YACA;EADA,CATA;EAYAC;IACA;MACA;QACA;UAAAC;QAAA;;QAEA;UACA;QACA;;QACAC;UACAC,eADA;UAEAC;QAFA;QAIA;MACA,CAXA,CAWA;QACAF;UACAC,aADA;UAEAC;QAFA;MAIA;IACA;;EAnBA;AAZA","names":["name","mixins","props","restaurantComments","type","required","computed","methods","commentId","Toast","icon","title"],"sourceRoot":"src/components","sources":["RestaurantComments.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <h2 class=\"my-4\">所有評論：</h2>\r\n    <div v-for=\"comment in restaurantComments\" :key=\"comment.id\">\r\n      <blockquote class=\"blockquote mb-0\">\r\n        <button\r\n          v-if=\"currentUser.isAdmin\"\r\n          type=\"button\"\r\n          class=\"btn btn-danger float-right\"\r\n          @click.stop.prevent=\"handleDeleteButtonClick(comment.id)\"\r\n        >\r\n          Delete\r\n        </button>\r\n        <h3>\r\n          <router-link\r\n            :to=\"{ name: 'restaurant', params: { id: comment.RestaurantId } }\"\r\n          >\r\n            {{ comment.User.name }}\r\n          </router-link>\r\n        </h3>\r\n        <p>{{ comment.text }}</p>\r\n        <footer class=\"blockquote-footer\">\r\n          {{ comment.createdAt | fromNow }}\r\n        </footer>\r\n      </blockquote>\r\n      <hr />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { fromNowFilter } from \"./../utils/mixins\"\r\nimport { mapState } from \"vuex\"\r\nimport commentsAPI from \"./../apis/comments\";\r\nimport { Toast } from \"./../utils/helpers\";\r\n\r\n\r\nexport default {\r\n  name:'RestaurantComments',\r\n  mixins: [fromNowFilter],\r\n  props: {\r\n    restaurantComments: {\r\n      type: Array,\r\n      required: true,\r\n    },\r\n  },\r\n  computed: {\r\n    ...mapState(['currentUser'])\r\n  },\r\n  methods: {\r\n    async handleDeleteButtonClick(commentId) {\r\n      try {\r\n        const response = await commentsAPI.delete({ commentId });\r\n        \r\n        if (response.data.status !== \"success\") {\r\n          throw new Error(response.data);\r\n        }\r\n        Toast.fire({\r\n          icon: \"success\",\r\n          title: \"留言已刪除\",\r\n        });\r\n        this.$emit(\"after-delete-comment\", commentId);\r\n      } catch (error) {\r\n        Toast.fire({\r\n          icon: \"error\",\r\n          title: \"無法刪除留言，請稍後再試\",\r\n        });\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n"]},"metadata":{},"sourceType":"module"}