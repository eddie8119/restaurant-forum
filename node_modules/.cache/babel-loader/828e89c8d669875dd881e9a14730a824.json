{"ast":null,"code":"// import adminAPI from \"./../apis/admin\";\n// import { Toast } from \"./../utils/helpers\";\nconst dummyData = {\n  categories: [{\n    id: 1,\n    name: '中式料理',\n    createdAt: '2019-06-22T09:00:43.000Z',\n    updatedAt: '2019-06-22T09:00:43.000Z'\n  }, {\n    id: 2,\n    name: '日本料理',\n    createdAt: '2019-06-22T09:00:43.000Z',\n    updatedAt: '2019-06-22T09:00:43.000Z'\n  }, {\n    id: 3,\n    name: '義大利料理',\n    createdAt: '2019-06-22T09:00:43.000Z',\n    updatedAt: '2019-06-22T09:00:43.000Z'\n  }, {\n    id: 4,\n    name: '墨西哥料理',\n    createdAt: '2019-06-22T09:00:43.000Z',\n    updatedAt: '2019-06-22T09:00:43.000Z'\n  }]\n};\nexport default {\n  name: \"AdminRestaurantForm\",\n  props: {\n    isProcessing: {\n      type: Boolean,\n      default: false\n    },\n    initialRestaurant: {\n      type: Object,\n      default: () => ({\n        name: \"\",\n        categoryId: \"\",\n        tel: \"\",\n        address: \"\",\n        description: \"\",\n        image: \"\",\n        openingHours: \"\"\n      })\n    }\n  },\n\n  data() {\n    return {\n      categories: [],\n      restaurant: { ...this.initialRestaurant\n      },\n      isLoading: true\n    };\n  },\n\n  // watch: {\n  //   initialRestaurant(newValue) {\n  //     this.restaurant = {\n  //     ...this.restaurant,\n  //     ...newValue\n  //     }\n  //   }\n  // },\n  created() {\n    this.fetchCategories();\n    this.restaurant = { ...this.restaurant,\n      ...this.initialRestaurant\n    };\n  },\n\n  methods: {\n    async fetchCategories() {\n      this.categories = dummyData.categories;\n    },\n\n    // handleFileChange(e) {\n    //   const { files } = e.target\n    //   if (files.length === 0) {\n    //     // 使用者沒有選擇上傳的檔案\n    //     this.restaurant.image = ''\n    //   } else {\n    //     // 否則產生預覽圖\n    //     const imageURL = window.URL.createObjectURL(files[0])\n    //     this.restaurant.image = imageURL\n    //   }\n    // },\n    handleSubmit(e) {\n      const form = e.target;\n      const formData = new FormData(form);\n      this.$emit('after-submit', formData);\n    } // async fetchCategories() {      \n    //   try {\n    //     const { data } = await adminAPI.categories.get()\n    //     if (data.status === 'error') {\n    //       throw new Error(data.message);\n    //     }\n    //     //這是哪來的\n    //     this.categories = data.categories\n    //     this.isLoading = false        \n    //   } catch (error) {  \n    //     this.isLoading = false\n    //     console.error(error.message)      \n    //     Toast.fire({\n    //       icon: \"error\",\n    //       title: \"無法取得餐廳類別，請稍後再試\",\n    //     });\n    //   }\n    // },\n    // handleFileChange(e) {\n    //   const files = e.target.files;\n    //   if (files.length === 0) {\n    //     this.restaurant.image = \"\";\n    //   } else {\n    //     const imageURL = window.URL.createObjectURL(files[0]);\n    //     this.restaurant.image = imageURL;\n    //   }\n    // },\n    // handleSubmit(e) {\n    //   if (!this.restaurant.name) {\n    //     Toast.fire({\n    //       icon: \"warning\",\n    //       title: \"請填寫餐廳名稱\",\n    //     });\n    //     return;\n    //   } else if (!this.restaurant.categoryId) {\n    //     Toast.fire({\n    //       icon: \"warning\",\n    //       title: \"請選擇餐廳類別\",\n    //     });\n    //     return;\n    //   }\n    //   const form = e.target;\n    //   const formData = new FormData(form);\n    //   this.$emit(\"after-submit\", formData);\n    // },\n\n\n  }\n};","map":{"version":3,"mappings":"AAsHA;AACA;AAEA;EACAA,aACA;IACAC,KADA;IAEAC,YAFA;IAGAC,qCAHA;IAIAC;EAJA,CADA,EAOA;IACAH,KADA;IAEAC,YAFA;IAGAC,qCAHA;IAIAC;EAJA,CAPA,EAaA;IACAH,KADA;IAEAC,aAFA;IAGAC,qCAHA;IAIAC;EAJA,CAbA,EAmBA;IACAH,KADA;IAEAC,aAFA;IAGAC,qCAHA;IAIAC;EAJA,CAnBA;AADA;AA6BA;EACAF,2BADA;EAEAG;IACAC;MACAC,aADA;MAEAC;IAFA,CADA;IAKAC;MACAF,YADA;MAEAC;QACAN,QADA;QAEAQ,cAFA;QAGAC,OAHA;QAIAC,WAJA;QAKAC,eALA;QAMAC,SANA;QAOAC;MAPA;IAFA;EALA,CAFA;;EAoBAC;IACA;MACAhB,cADA;MAEAiB,cACA;MADA,CAFA;MAKAC;IALA;EAOA,CA5BA;;EA6BA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACAC;IACA;IACA,oBACA,kBADA;MAEA;IAFA;EAIA,CA3CA;;EA4CAC;IACA;MACA;IACA,CAHA;;IAIA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACAC;MACA;MACA;MACA;IACA,CAnBA,CAsBA;IACA;IACA;IAEA;IACA;IACA;IACA;IAEA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;;;EApEA;AA5CA","names":["categories","id","name","createdAt","updatedAt","props","isProcessing","type","default","initialRestaurant","categoryId","tel","address","description","image","openingHours","data","restaurant","isLoading","created","methods","handleSubmit"],"sourceRoot":"src/components","sources":["AdminRestaurantForm.vue"],"sourcesContent":["<template>\r\n  <form @submit.stop.prevent=\"handleSubmit\">\r\n    <div class=\"form-group\">\r\n      <label for=\"name\">Name</label>\r\n      <input\r\n        v-model=\"restaurant.name\"\r\n        id=\"name\"\r\n        type=\"text\"\r\n        class=\"form-control\"\r\n        name=\"name\"\r\n        placeholder=\"Enter name\"\r\n        required\r\n      >\r\n    </div>\r\n\r\n    <div class=\"form-group\">\r\n      <label for=\"categoryId\">Category</label>\r\n      <select\r\n        v-model=\"restaurant.categoryId\"\r\n        id=\"categoryId\"\r\n        class=\"form-control\"\r\n        name=\"categoryId\"\r\n        required\r\n      >\r\n        <option\r\n          value=\"\"\r\n          selected\r\n          disabled\r\n        >\r\n          --請選擇--\r\n        </option>\r\n        <option\r\n          v-for=\"category in categories\"\r\n          :key=\"category.id\"\r\n          :value=\"category.id\"\r\n        >\r\n          {{ category.name }}\r\n        </option>\r\n\r\n        \r\n      </select>\r\n    </div>\r\n\r\n    <div class=\"form-group\">\r\n      <label for=\"tel\">Tel</label>\r\n      <input\r\n        v-model=\"restaurant.tel\"\r\n        id=\"tel\"\r\n        type=\"text\"\r\n        class=\"form-control\"\r\n        name=\"tel\"\r\n        placeholder=\"Enter telephone number\"\r\n      >\r\n    </div>\r\n\r\n    <div class=\"form-group\">\r\n      <label for=\"address\">Address</label>\r\n      <input\r\n        v-model=\"restaurant.address\"\r\n        id=\"address\"\r\n        type=\"text\"\r\n        class=\"form-control\"\r\n        placeholder=\"Enter address\"\r\n        name=\"address\"\r\n      >\r\n    </div>\r\n\r\n    <div class=\"form-group\">\r\n      <label for=\"opening-hours\">Opening Hours</label>\r\n      <input\r\n        v-model=\"restaurant.openingHours\"\r\n        id=\"opening-hours\"\r\n        type=\"time\"\r\n        class=\"form-control\"\r\n        name=\"opening_hours\"\r\n      >\r\n    </div>\r\n\r\n    <div class=\"form-group\">\r\n      <label for=\"description\">Description</label>\r\n      <textarea\r\n        v-model=\"restaurant.description\"\r\n        id=\"description\"\r\n        class=\"form-control\"\r\n        rows=\"3\"\r\n        name=\"description\"\r\n      />\r\n    </div>\r\n\r\n    <div class=\"form-group\">\r\n      <label for=\"image\">Image</label>\r\n      <img\r\n        v-if=\"restaurant.image\"\r\n        :src=\"restaurant.image\"\r\n        class=\"d-block img-thumbnail mb-3\"\r\n        width=\"200\"\r\n        height=\"200\"\r\n      >\r\n      <input\r\n        id=\"image\"\r\n        type=\"file\"\r\n        name=\"image\"\r\n        accept=\"image/*\"\r\n        class=\"form-control-file\"\r\n        @change=\"handleFileChange\"\r\n      >\r\n    </div>\r\n\r\n    <button\r\n      type=\"submit\"\r\n      class=\"btn btn-primary\"\r\n    >\r\n      送出\r\n    </button>\r\n  </form>\r\n</template>\r\n\r\n<script>\r\n// import adminAPI from \"./../apis/admin\";\r\n// import { Toast } from \"./../utils/helpers\";\r\n\r\nconst dummyData = {\r\n  categories: [\r\n    {\r\n      id: 1,\r\n      name: '中式料理',\r\n      createdAt: '2019-06-22T09:00:43.000Z',\r\n      updatedAt: '2019-06-22T09:00:43.000Z'\r\n    },\r\n    {\r\n      id: 2,\r\n      name: '日本料理',\r\n      createdAt: '2019-06-22T09:00:43.000Z',\r\n      updatedAt: '2019-06-22T09:00:43.000Z'\r\n    },\r\n    {\r\n      id: 3,\r\n      name: '義大利料理',\r\n      createdAt: '2019-06-22T09:00:43.000Z',\r\n      updatedAt: '2019-06-22T09:00:43.000Z'\r\n    },\r\n    {\r\n      id: 4,\r\n      name: '墨西哥料理',\r\n      createdAt: '2019-06-22T09:00:43.000Z',\r\n      updatedAt: '2019-06-22T09:00:43.000Z'\r\n    }\r\n  ]\r\n}\r\n\r\nexport default {\r\n  name:\"AdminRestaurantForm\",\r\n  props: {\r\n    isProcessing: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    initialRestaurant: {\r\n      type: Object,\r\n      default: () => ({      \r\n        name: \"\",\r\n        categoryId: \"\",\r\n        tel: \"\",\r\n        address: \"\",\r\n        description: \"\",\r\n        image: \"\",\r\n        openingHours: \"\", \r\n      })  \r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      categories: [],\r\n      restaurant: {\r\n        ...this.initialRestaurant\r\n      },      \r\n      isLoading: true,\r\n    };\r\n  },\r\n  // watch: {\r\n  //   initialRestaurant(newValue) {\r\n  //     this.restaurant = {\r\n  //     ...this.restaurant,\r\n  //     ...newValue\r\n  //     }\r\n  //   }\r\n  // },\r\n  created () {\r\n    this.fetchCategories();\r\n    this.restaurant = {\r\n      ...this.restaurant,\r\n      ...this.initialRestaurant,\r\n    };\r\n  },\r\n  methods: {\r\n    async fetchCategories () {\r\n      this.categories = dummyData.categories\r\n    },\r\n    // handleFileChange(e) {\r\n    //   const { files } = e.target\r\n    //   if (files.length === 0) {\r\n    //     // 使用者沒有選擇上傳的檔案\r\n    //     this.restaurant.image = ''\r\n    //   } else {\r\n    //     // 否則產生預覽圖\r\n    //     const imageURL = window.URL.createObjectURL(files[0])\r\n    //     this.restaurant.image = imageURL\r\n    //   }\r\n    // },\r\n    handleSubmit (e) {\r\n      const form = e.target\r\n      const formData = new FormData(form)\r\n      this.$emit('after-submit', formData)\r\n    }\r\n\r\n    \r\n    // async fetchCategories() {      \r\n    //   try {\r\n    //     const { data } = await adminAPI.categories.get()\r\n\r\n    //     if (data.status === 'error') {\r\n    //       throw new Error(data.message);\r\n    //     }\r\n    //     //這是哪來的\r\n        \r\n    //     this.categories = data.categories\r\n    //     this.isLoading = false        \r\n    //   } catch (error) {  \r\n    //     this.isLoading = false\r\n    //     console.error(error.message)      \r\n    //     Toast.fire({\r\n    //       icon: \"error\",\r\n    //       title: \"無法取得餐廳類別，請稍後再試\",\r\n    //     });\r\n    //   }\r\n    // },\r\n    // handleFileChange(e) {\r\n    //   const files = e.target.files;\r\n    //   if (files.length === 0) {\r\n    //     this.restaurant.image = \"\";\r\n    //   } else {\r\n    //     const imageURL = window.URL.createObjectURL(files[0]);\r\n    //     this.restaurant.image = imageURL;\r\n    //   }\r\n    // },\r\n    // handleSubmit(e) {\r\n    //   if (!this.restaurant.name) {\r\n    //     Toast.fire({\r\n    //       icon: \"warning\",\r\n    //       title: \"請填寫餐廳名稱\",\r\n    //     });\r\n    //     return;\r\n    //   } else if (!this.restaurant.categoryId) {\r\n    //     Toast.fire({\r\n    //       icon: \"warning\",\r\n    //       title: \"請選擇餐廳類別\",\r\n    //     });\r\n    //     return;\r\n    //   }\r\n    //   const form = e.target;\r\n    //   const formData = new FormData(form);\r\n    //   this.$emit(\"after-submit\", formData);\r\n    // },\r\n  },\r\n};\r\n</script>\r\n"]},"metadata":{},"sourceType":"module"}