{"ast":null,"code":"import NavTabs from \"../components/NavTabs.vue\";\nimport RestaurantCard from \"../components/RestaurantCard.vue\";\nimport RestaurantsNavPills from \"../components/RestaurantsNavPills.vue\";\nimport RestaurantsPagination from \"../components/RestaurantsPagination.vue\";\nimport restaurantsAPI from \"./../apis/restaurants\";\nimport { Toast } from \"./../utils/helpers\";\nexport default {\n  components: {\n    NavTabs,\n    RestaurantCard,\n    RestaurantsNavPills,\n    RestaurantsPagination\n  },\n\n  data() {\n    return {\n      restaurants: [],\n      categories: [],\n      categoryId: -1,\n      currentPage: 1,\n      totalPage: [],\n      previousPage: -1,\n      nextPage: -1\n    };\n  },\n\n  created() {\n    //直接輸入時的情境\n    const {\n      page = \"\",\n      categoryId = \"\"\n    } = this.$route.query;\n    this.fetchRestaurants({\n      queryPage: page,\n      queryCategoryId: categoryId\n    });\n  },\n\n  beforeRouteUpdate(to, from, next) {\n    //更新菜單的情境\n    const {\n      page = \"\",\n      categoryId = \"\"\n    } = to.query;\n    this.fetchRestaurants({\n      queryPage: page,\n      queryCategoryId: categoryId\n    });\n    next();\n  },\n\n  methods: {\n    async fetchRestaurants({\n      queryPage,\n      queryCategoryId\n    }) {\n      try {\n        const response = await restaurantsAPI.getRestaurants({\n          page: queryPage,\n          categoryId: queryCategoryId\n        });\n        console.log(response);\n        const {\n          restaurants,\n          categories,\n          categoryId,\n          page,\n          totalPage,\n          prev,\n          next\n        } = response.data;\n        this.restaurants = restaurants;\n        this.categories = categories;\n        this.categoryId = categoryId;\n        this.currentPage = page;\n        this.totalPage = totalPage;\n        this.previousPage = prev;\n        this.nextPage = next;\n      } catch (error) {\n        console.log(\"error\", error);\n        Toast.fire({\n          icon: \"error\",\n          title: \"無法取得餐廳資料，請稍後再試\"\n        });\n      }\n    }\n\n  }\n};","map":{"version":3,"mappings":"AA4BA;AACA;AACA;AACA;AACA;AACA;AAEA;EACAA;IACAC,OADA;IAEAC,cAFA;IAGAC,mBAHA;IAIAC;EAJA,CADA;;EAQAC;IACA;MACAC,eADA;MAEAC,cAFA;MAGAC,cAHA;MAIAC,cAJA;MAKAC,aALA;MAMAC,gBANA;MAOAC;IAPA;EASA,CAlBA;;EAmBAC;IACA;IACA;MAAAC;MAAAN;IAAA;IACA;MAAAO;MAAAC;IAAA;EACA,CAvBA;;EAwBAC;IACA;IACA;MAAAH;MAAAN;IAAA;IACA;MAAAO;MAAAC;IAAA;IACAE;EACA,CA7BA;;EA8BAC;IACA;MAAAJ;MAAAC;IAAA;MACA;QACA;UACAF,eADA;UAEAN;QAFA;QAKAY;QAEA;UACAd,WADA;UAEAC,UAFA;UAGAC,UAHA;UAIAM,IAJA;UAKAJ,SALA;UAMAW,IANA;UAOAH;QAPA,IAQAI,aARA;QAUA;QACA;QACA;QACA;QACA;QACA;QACA;MACA,CAzBA,CAyBA;QACAF;QACAG;UACAC,aADA;UAEAC;QAFA;MAIA;IACA;;EAlCA;AA9BA","names":["components","NavTabs","RestaurantCard","RestaurantsNavPills","RestaurantsPagination","data","restaurants","categories","categoryId","currentPage","totalPage","previousPage","nextPage","created","page","queryPage","queryCategoryId","beforeRouteUpdate","next","methods","console","prev","response","Toast","icon","title"],"sourceRoot":"src/views","sources":["RestaurantS.vue"],"sourcesContent":["<template>\r\n  <div class=\"container py-5\">\r\n    <NavTabs />\r\n    <!-- 餐廳類別標籤 RestaurantsNavPills -->\r\n    <RestaurantsNavPills :categories=\"categories\" />\r\n\r\n    <div class=\"row\">\r\n      <!-- 餐廳卡片 RestaurantCard-->\r\n      <RestaurantCard\r\n        v-for=\"restaurant in restaurants\"\r\n        :key=\"restaurant.id\"\r\n        :initial-restaurant=\"restaurant\"\r\n      />\r\n    </div>\r\n\r\n    <!-- 分頁標籤 RestaurantPagination -->\r\n    <RestaurantsPagination\r\n      v-if=\"totalPage.length > 1\"\r\n      :current-page=\"currentPage\"\r\n      :total-page=\"totalPage\"\r\n      :category-id=\"categoryId\"\r\n      :previous-page=\"previousPage\"\r\n      :next-page=\"nextPage\"      \r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport NavTabs from \"../components/NavTabs.vue\";\r\nimport RestaurantCard from \"../components/RestaurantCard.vue\";\r\nimport RestaurantsNavPills from \"../components/RestaurantsNavPills.vue\";\r\nimport RestaurantsPagination from \"../components/RestaurantsPagination.vue\";\r\nimport restaurantsAPI from \"./../apis/restaurants\";\r\nimport { Toast } from \"./../utils/helpers\";\r\n\r\nexport default {\r\n  components: {\r\n    NavTabs,\r\n    RestaurantCard,\r\n    RestaurantsNavPills,\r\n    RestaurantsPagination,\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      restaurants: [],\r\n      categories: [],\r\n      categoryId: -1,\r\n      currentPage: 1,\r\n      totalPage: [],\r\n      previousPage: -1,\r\n      nextPage: -1,\r\n    };\r\n  },  \r\n  created() {\r\n    //直接輸入時的情境\r\n    const { page = \"\", categoryId = \"\" } = this.$route.query;\r\n    this.fetchRestaurants({ queryPage: page, queryCategoryId: categoryId });\r\n  },\r\n  beforeRouteUpdate(to, from, next) {     \r\n    //更新菜單的情境\r\n    const { page = \"\", categoryId = \"\" } = to.query;    \r\n    this.fetchRestaurants({ queryPage: page, queryCategoryId: categoryId });\r\n    next();\r\n  },\r\n  methods: {\r\n    async fetchRestaurants({ queryPage, queryCategoryId }) {\r\n      try {\r\n        const response = await restaurantsAPI.getRestaurants({\r\n          page: queryPage,\r\n          categoryId: queryCategoryId,\r\n        });\r\n\r\n        console.log(response)\r\n\r\n        const {\r\n          restaurants,\r\n          categories,\r\n          categoryId,\r\n          page,\r\n          totalPage,\r\n          prev,\r\n          next,\r\n        } = response.data;\r\n\r\n        this.restaurants = restaurants;\r\n        this.categories = categories;\r\n        this.categoryId = categoryId;\r\n        this.currentPage = page;\r\n        this.totalPage = totalPage;\r\n        this.previousPage = prev;\r\n        this.nextPage = next;\r\n      } catch (error) {\r\n        console.log(\"error\", error);\r\n        Toast.fire({\r\n          icon: \"error\",\r\n          title: \"無法取得餐廳資料，請稍後再試\",\r\n        });\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n\r\n  created() {\r\n    //直接輸入時的情境\r\n    const { page = \"\", categoryId = \"\" } = this.$route.query;\r\n    this.fetchRestaurants({ queryPage: page, queryCategoryId: categoryId });\r\n  },\r\n  beforeRouteUpdate(to, from, next) {     \r\n    //更新菜單的情境\r\n    const { page = \"\", categoryId = \"\" } = to.query;    \r\n    this.fetchRestaurants({ queryPage: page, queryCategoryId: categoryId });\r\n    next();\r\n  },"]},"metadata":{},"sourceType":"module"}