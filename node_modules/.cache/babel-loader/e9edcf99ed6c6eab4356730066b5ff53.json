{"ast":null,"code":"import \"core-js/modules/es.error.cause.js\";\nimport adminAPI from \"./../apis/admin\";\nimport { Toast } from \"./../utils/helpers\";\nexport default {\n  props: {\n    // isProcessing: {\n    //   type: Boolean,\n    //   default: false,\n    // },\n    initialRestaurant: {\n      type: Object,\n      default: () => {\n        return {\n          //沒有return js為解讀成funcation\n          name: \"\",\n          categoryId: \"\",\n          tel: \"\",\n          address: \"\",\n          description: \"\",\n          image: \"\",\n          openingHours: \"\" //這裡沒有\n\n        };\n      }\n    }\n  },\n\n  data() {\n    return {\n      categories: [],\n      restaurant: { ...this.initialRestaurant\n      } // isLoading: true,\n\n    };\n  },\n\n  created() {\n    this.fetchCategories(); // this.restaurant = {\n    //   ...this.restaurant,\n    //   ...this.initialRestaurant, //畫面第一次渲染出來的時候，樣板上就要有資料\n    // };\n    // console.log(this.restaurant)\n  },\n\n  methods: {\n    async fetchCategories() {\n      try {\n        const {\n          data\n        } = await adminAPI.categories.get();\n\n        if (data.status === 'error') {\n          throw new Error(data.message);\n        } //這是哪來的\n\n\n        this.categories = data.categories;\n      } catch (error) {\n        console.error(error.message);\n        Toast.fire({\n          icon: \"error\",\n          title: \"無法取得餐廳類別，請稍後再試\"\n        });\n      }\n    },\n\n    handleFileChange(e) {\n      const files = e.target.files;\n\n      if (files.length === 0) {\n        this.restaurant.image = \"\";\n      } else {\n        const imageURL = window.URL.createObjectURL(files[0]);\n        this.restaurant.image = imageURL;\n      }\n    },\n\n    handleSubmit(e) {\n      // if (!this.restaurant.name) {\n      //   Toast.fire({\n      //     icon: \"warning\",\n      //     title: \"請填寫餐廳名稱\",\n      //   });\n      //   return;\n      // } else if (!this.restaurant.categoryId) {\n      //   Toast.fire({\n      //     icon: \"warning\",\n      //     title: \"請選擇餐廳類別\",\n      //   });\n      //   return;\n      // }\n      const form = e.target;\n      const formData = new FormData(form);\n      this.$emit(\"after-submit\", formData);\n    }\n\n  }\n};","map":{"version":3,"mappings":";AAuGA;AACA;AAEA;EACAA;IACA;IACA;IACA;IACA;IACAC;MACAC,YADA;MAEAC;QACA;UAAA;UACAC,QADA;UAEAC,cAFA;UAGAC,OAHA;UAIAC,WAJA;UAKAC,eALA;UAMAC,SANA;UAOAC,gBAPA,CAQA;;QARA;MAUA;IAbA;EALA,CADA;;EAsBAC;IACA;MACAC,cADA;MAEAC,cACA;MADA,CAFA,CAMA;;IANA;EAQA,CA/BA;;EAgCAC;IACA,uBADA,CAEA;IACA;IACA;IACA;IACA;EACA,CAvCA;;EAwCAC;IACA;MACA;QACA;UAAAJ;QAAA;;QAEA;UACA;QACA,CALA,CAMA;;;QAEA;MAEA,CAVA,CAUA;QACAK;QACAC;UACAC,aADA;UAEAC;QAFA;MAIA;IACA,CAnBA;;IAoBAC;MACA;;MACA;QACA;MACA,CAFA,MAEA;QACA;QACA;MACA;IACA,CA5BA;;IA6BAC;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IACA;;EA9CA;AAxCA","names":["props","initialRestaurant","type","default","name","categoryId","tel","address","description","image","openingHours","data","categories","restaurant","created","methods","console","Toast","icon","title","handleFileChange","handleSubmit"],"sourceRoot":"src/components","sources":["AdminRestaurantForm.vue"],"sourcesContent":["<template>\r\n  <form v-show=\"!isLoading\" @submit.stop.prevent=\"handleSubmit\">\r\n    <div class=\"form-group\">\r\n      <label for=\"name\">Name</label>\r\n      <input\r\n        id=\"name\"\r\n        v-model=\"restaurant.name\"\r\n        type=\"text\"\r\n        class=\"form-control\"\r\n        name=\"name\"\r\n        placeholder=\"Enter name\"\r\n        required\r\n      />\r\n    </div>\r\n\r\n    <div class=\"form-group\">\r\n      <label for=\"categoryId\">Category</label>\r\n      <select\r\n        id=\"categoryId\"\r\n        v-model=\"restaurant.categoryId\"\r\n        class=\"form-control\"\r\n        name=\"categoryId\"\r\n        required\r\n      >\r\n        <option value=\"\" selected disabled>--請選擇--</option>\r\n        <option\r\n          v-for=\"category in categories\"\r\n          :key=\"category.id\"\r\n          :value=\"category.id\"\r\n        >\r\n          {{ category.name }}\r\n        </option>\r\n      </select>\r\n    </div>\r\n\r\n    <div class=\"form-group\">\r\n      <label for=\"tel\">Tel</label>\r\n      <input\r\n        id=\"tel\"\r\n        v-model=\"restaurant.tel\"\r\n        type=\"text\"\r\n        class=\"form-control\"\r\n        name=\"tel\"\r\n        placeholder=\"Enter telephone number\"\r\n      />\r\n    </div>\r\n\r\n    <div class=\"form-group\">\r\n      <label for=\"address\">Address</label>\r\n      <input\r\n        id=\"address\"\r\n        v-model=\"restaurant.address\"\r\n        type=\"text\"\r\n        class=\"form-control\"\r\n        placeholder=\"Enter address\"\r\n        name=\"address\"\r\n        @change=\"handleFileChange\"\r\n      />\r\n    </div>\r\n\r\n    <div class=\"form-group\">\r\n      <label for=\"opening-hours\">Opening Hours</label>\r\n      <input\r\n        id=\"opening-hours\"\r\n        v-model=\"restaurant.openingHours\"\r\n        type=\"time\"\r\n        class=\"form-control\"\r\n        name=\"opening_hours\"\r\n      />\r\n    </div>\r\n\r\n    <div class=\"form-group\">\r\n      <label for=\"description\">Description</label>\r\n      <textarea\r\n        id=\"description\"\r\n        v-model=\"restaurant.description\"\r\n        class=\"form-control\"\r\n        rows=\"3\"\r\n        name=\"description\"\r\n      />\r\n    </div>\r\n    \r\n\r\n    <div class=\"form-group\">\r\n      <label for=\"image\">Image</label>\r\n      <img v-if=\"restaurant.image\" :src=\"restaurant.image\" class=\"d-block img-thumbnail mb-3\" width=\"200\" height=\"200\">\r\n      <input\r\n        id=\"image\"\r\n        type=\"file\"\r\n        name=\"image\"\r\n        accept=\"image/*\"\r\n        class=\"form-control-file\"\r\n        @change=\"handleFileChange\"\r\n      />\r\n    </div>\r\n\r\n    <button type=\"submit\" class=\"btn btn-primary\" :disabled=\"isProcessing\">\r\n      {{ isProcessing ? \"處理中...\" : \"送出\" }}\r\n    </button>\r\n  </form>\r\n</template>\r\n\r\n<script>\r\nimport adminAPI from \"./../apis/admin\";\r\nimport { Toast } from \"./../utils/helpers\";\r\n\r\nexport default {\r\n  props: {\r\n    // isProcessing: {\r\n    //   type: Boolean,\r\n    //   default: false,\r\n    // },\r\n    initialRestaurant: {\r\n      type: Object,\r\n      default: () => {        \r\n        return {    //沒有return js為解讀成funcation\r\n          name: \"\",\r\n          categoryId: \"\",\r\n          tel: \"\",\r\n          address: \"\",\r\n          description: \"\",\r\n          image: \"\",\r\n          openingHours: \"\", \r\n          //這裡沒有\r\n        }                      \r\n      },\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      categories: [],\r\n      restaurant: {\r\n        ...this.initialRestaurant\r\n      },\r\n      \r\n      // isLoading: true,\r\n    };\r\n  },\r\n  created() {\r\n    this.fetchCategories();\r\n    // this.restaurant = {\r\n    //   ...this.restaurant,\r\n    //   ...this.initialRestaurant, //畫面第一次渲染出來的時候，樣板上就要有資料\r\n    // };\r\n    // console.log(this.restaurant)\r\n  },\r\n  methods: {\r\n    async fetchCategories() {      \r\n      try {\r\n        const { data } = await adminAPI.categories.get()\r\n\r\n        if (data.status === 'error') {\r\n          throw new Error(data.message);\r\n        }\r\n        //這是哪來的\r\n        \r\n        this.categories = data.categories;\r\n        \r\n      } catch (error) {  \r\n        console.error(error.message)      \r\n        Toast.fire({\r\n          icon: \"error\",\r\n          title: \"無法取得餐廳類別，請稍後再試\",\r\n        });\r\n      }\r\n    },\r\n    handleFileChange(e) {\r\n      const files = e.target.files;\r\n      if (files.length === 0) {\r\n        this.restaurant.image = \"\";\r\n      } else {\r\n        const imageURL = window.URL.createObjectURL(files[0]);\r\n        this.restaurant.image = imageURL;\r\n      }\r\n    },\r\n    handleSubmit(e) {\r\n      // if (!this.restaurant.name) {\r\n      //   Toast.fire({\r\n      //     icon: \"warning\",\r\n      //     title: \"請填寫餐廳名稱\",\r\n      //   });\r\n      //   return;\r\n      // } else if (!this.restaurant.categoryId) {\r\n      //   Toast.fire({\r\n      //     icon: \"warning\",\r\n      //     title: \"請選擇餐廳類別\",\r\n      //   });\r\n      //   return;\r\n      // }\r\n      const form = e.target;\r\n      const formData = new FormData(form);\r\n      this.$emit(\"after-submit\", formData);\r\n    },\r\n  },\r\n};\r\n</script>\r\n"]},"metadata":{},"sourceType":"module"}