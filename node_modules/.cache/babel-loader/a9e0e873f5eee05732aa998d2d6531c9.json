{"ast":null,"code":"import AdminRestaurantForm from \"./../components/AdminRestaurantForm.vue\"; // import adminAPI from './../apis/admin'\n// import { Toast } from './../utils/helpers'\n\nconst dummyData = {\n  'restaurant': {\n    'id': 1,\n    'name': 'Laurence Reynolds',\n    'tel': '1-657-067-3756 x9782',\n    'address': '187 Kirlin Squares',\n    'opening_hours': '08:00',\n    'description': 'sit est mollitia',\n    'image': 'https://loremflickr.com/320/240/restaurant,food/?random=91.29816290184887',\n    'viewCounts': 1,\n    'createdAt': '2019-07-30T16:24:55.432Z',\n    'updatedAt': '2019-07-30T17:26:43.260Z',\n    'CategoryId': 3,\n    'Category': {\n      'id': 3,\n      'name': '義大利料理',\n      'createdAt': '2019-07-30T16:24:55.429Z',\n      'updatedAt': '2019-07-30T16:24:55.429Z'\n    }\n  }\n};\nexport default {\n  name: \"AdminRestaurantEdit\",\n  components: {\n    AdminRestaurantForm\n  },\n\n  data() {\n    return {\n      restaurant: {\n        id: -1,\n        name: \"\",\n        categoryId: \"\",\n        tel: \"\",\n        address: \"\",\n        description: \"\",\n        image: \"\",\n        openingHours: \"\"\n      },\n      isProcessing: false\n    };\n  },\n\n  created() {\n    const {\n      id\n    } = this.$route.params;\n    this.fetchRestaurant(id);\n  },\n\n  // beforeRouteUpdate(to, from, next){\n  //   const {id} = to.params\n  //   this.fetchRestaurant(id);\n  //   next()\n  // },\n  methods: {\n    // async fetchRestaurant (restaurantId){\n    //   try {        \n    //     const { data } = await adminAPI.restaurants.getDetail({ restaurantId })\n    //     if (data.status === 'error') {\n    //       throw new Error(data.message)\n    //     }  \n    //     const {\n    //       id,\n    //       name,\n    //       tel,\n    //       address,\n    //       opening_hours: openingHours,\n    //       description,\n    //       image,\n    //       CategoryId: categoryId\n    //     } = data.restaurant\n    //     this.restaurant = {\n    //       ...this.restaurant,\n    //       id,\n    //       name,\n    //       tel,\n    //       address,\n    //       openingHours,\n    //       description,\n    //       image,\n    //       categoryId\n    //     }\n    //   } catch (error) {\n    //     console.error(error.message)\n    //     Toast.fire({\n    //       icon: 'error',\n    //       title: '無法取得餐廳資料，請稍後再試'\n    //     })\n    //   }\n    // },\n    // async handleAfterSubmit(formData) {\n    //   try {\n    //     this.isProcessing = true\n    //     const { data } = await adminAPI.restaurants.update({\n    //       restaurantId: this.restaurant.id,\n    //       formData\n    //     })\n    //     if (data.status !== 'success') {\n    //       throw new Error(data.message)\n    //     }\n    //     this.$router.push({ name: 'admin-restaurants' })\n    //   } catch (error) {\n    //     this.isProcessing = false\n    //     Toast.fire({\n    //       icon: 'error',\n    //       title: '無法更新餐廳資料，請稍後再試'\n    //     })\n    //   }      \n    // }, \n    handleAfterSubmit(formData) {\n      // 透過 API 將表單資料送到伺服器\n      for (let [name, value] of formData.entries()) {\n        console.log(name + ': ' + value);\n      }\n    }\n\n  }\n};","map":{"version":3,"mappings":"AAWA,0E,CACA;AACA;;AAGA;EACA;IACA,OADA;IAEA,2BAFA;IAGA,6BAHA;IAIA,+BAJA;IAKA,wBALA;IAMA,iCANA;IAOA,oFAPA;IAQA,eARA;IASA,uCATA;IAUA,uCAVA;IAWA,eAXA;IAYA;MACA,OADA;MAEA,eAFA;MAGA,uCAHA;MAIA;IAJA;EAZA;AADA;AAsBA;EACAA,2BADA;EAEAC;IACAC;EADA,CAFA;;EAKAC;IACA;MACAC;QACAC,MADA;QAEAL,QAFA;QAGAM,cAHA;QAIAC,OAJA;QAKAC,WALA;QAMAC,eANA;QAOAC,SAPA;QAQAC;MARA,CADA;MAWAC;IAXA;EAaA,CAnBA;;EAoBAC;IACA;MAAAR;IAAA;IACA;EAEA,CAxBA;;EAyBA;EACA;EACA;EACA;EACA;EACAS;IACA;IACA;IACA;IAEA;IACA;IACA;IAEA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IAEA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IAEA;IACA;IACA;IAEA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACAC;MACA;MACA;QACAC;MACA;IACA;;EAjEA;AA9BA","names":["name","components","AdminRestaurantForm","data","restaurant","id","categoryId","tel","address","description","image","openingHours","isProcessing","created","methods","handleAfterSubmit","console"],"sourceRoot":"src/views","sources":["AdminRestaurantEdit.vue"],"sourcesContent":["<template>\r\n  <div class=\"container py-5\">\r\n    <AdminRestaurantForm\r\n      :initial-restaurant=\"restaurant\"\r\n      :is-processing=\"isProcessing\"\r\n      @after-submit=\"handleAfterSubmit\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport AdminRestaurantForm from \"./../components/AdminRestaurantForm.vue\";\r\n// import adminAPI from './../apis/admin'\r\n// import { Toast } from './../utils/helpers'\r\n\r\n\r\nconst dummyData = {\r\n    'restaurant': {\r\n      'id': 1,\r\n      'name': 'Laurence Reynolds',\r\n      'tel': '1-657-067-3756 x9782',\r\n      'address': '187 Kirlin Squares',\r\n      'opening_hours': '08:00',\r\n      'description': 'sit est mollitia',\r\n      'image': 'https://loremflickr.com/320/240/restaurant,food/?random=91.29816290184887',\r\n      'viewCounts': 1,\r\n      'createdAt': '2019-07-30T16:24:55.432Z',\r\n      'updatedAt': '2019-07-30T17:26:43.260Z',\r\n      'CategoryId': 3,\r\n      'Category': {\r\n        'id': 3,\r\n        'name': '義大利料理',\r\n        'createdAt': '2019-07-30T16:24:55.429Z',\r\n        'updatedAt': '2019-07-30T16:24:55.429Z'\r\n      }\r\n    }\r\n  }\r\n\r\nexport default {\r\n  name: \"AdminRestaurantEdit\",\r\n  components: {\r\n    AdminRestaurantForm,\r\n  },\r\n  data() {\r\n    return {\r\n      restaurant: {\r\n        id: -1,\r\n        name: \"\",\r\n        categoryId: \"\",\r\n        tel: \"\",\r\n        address: \"\",\r\n        description: \"\",\r\n        image: \"\",\r\n        openingHours: \"\",\r\n      },\r\n      isProcessing: false\r\n    };\r\n  },\r\n  created() {\r\n    const { id } = this.$route.params;\r\n    this.fetchRestaurant(id);\r\n    \r\n  },\r\n  // beforeRouteUpdate(to, from, next){\r\n  //   const {id} = to.params\r\n  //   this.fetchRestaurant(id);\r\n  //   next()\r\n  // },\r\n  methods: {\r\n    // async fetchRestaurant (restaurantId){\r\n    //   try {        \r\n    //     const { data } = await adminAPI.restaurants.getDetail({ restaurantId })\r\n\r\n    //     if (data.status === 'error') {\r\n    //       throw new Error(data.message)\r\n    //     }  \r\n\r\n    //     const {\r\n    //       id,\r\n    //       name,\r\n    //       tel,\r\n    //       address,\r\n    //       opening_hours: openingHours,\r\n    //       description,\r\n    //       image,\r\n    //       CategoryId: categoryId\r\n    //     } = data.restaurant\r\n        \r\n    //     this.restaurant = {\r\n    //       ...this.restaurant,\r\n    //       id,\r\n    //       name,\r\n    //       tel,\r\n    //       address,\r\n    //       openingHours,\r\n    //       description,\r\n    //       image,\r\n    //       categoryId\r\n    //     }\r\n    //   } catch (error) {\r\n    //     console.error(error.message)\r\n    //     Toast.fire({\r\n    //       icon: 'error',\r\n    //       title: '無法取得餐廳資料，請稍後再試'\r\n    //     })\r\n    //   }\r\n    // },\r\n    // async handleAfterSubmit(formData) {\r\n    //   try {\r\n    //     this.isProcessing = true\r\n    //     const { data } = await adminAPI.restaurants.update({\r\n    //       restaurantId: this.restaurant.id,\r\n    //       formData\r\n    //     })\r\n\r\n    //     if (data.status !== 'success') {\r\n    //       throw new Error(data.message)\r\n    //     }\r\n\r\n    //     this.$router.push({ name: 'admin-restaurants' })\r\n    //   } catch (error) {\r\n    //     this.isProcessing = false\r\n    //     Toast.fire({\r\n    //       icon: 'error',\r\n    //       title: '無法更新餐廳資料，請稍後再試'\r\n    //     })\r\n    //   }      \r\n    // }, \r\n    handleAfterSubmit (formData) {\r\n      // 透過 API 將表單資料送到伺服器\r\n      for (let [name, value] of formData.entries()) {\r\n        console.log(name + ': ' + value)\r\n      }\r\n    }   \r\n  },\r\n};\r\n</script>\r\n"]},"metadata":{},"sourceType":"module"}